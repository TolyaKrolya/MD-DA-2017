---
title: "Homework 1"
author: "Teslenko RI-440005"
date: '10 октября 2017 г '
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, error = TRUE)
```
# Домашнее задание № 1
## Работа с данными.
По адресу http://www.stats.uwo.ca/faculty/braun/data/rnf6080.dat можно получить набор данных об осадках в Канаде с 1960 по 1980 годы. Необходимо загрузить эти данные при помощи ``read.table``. Воспользуйтесь справкой, чтобы изучить аргументы, которые принимает функция. 
- Загрузите данные в датафрейм, который назовите ``data.df``.

```{r}
data.df = read.table("http://www.stats.uwo.ca/faculty/braun/data/rnf6080.dat")
```

- Сколько строк и столбцов в ``data.df``? Если получилось не 5070 наблюдений 27 переменных, то проверяйте аргументы.

```{r}
print(nrow(data.df))
print(ncol(data.df))
```

- Получите имена колонок из ``data.df``.

```{r}
print(colnames(data.df))
```

- Найдите значение из 5 строки седьмого столбца.

```{r}
print(data.df[5,7])
```

- Напечатайте целиком 2 строку из ``data.df``

```{r}
print(data.df[2,])
```

- Объясните, что делает следующая строка кода ``names(data.df) <- c("year", "month", "day", seq(0,23))``. Воспользуйтесь функциями ``head`` и ``tail``, чтобы просмотреть таблицу. Что представляют собой последние 24 колонки?

```{r}
names(data.df) = c("year", "month", "day", seq(0,23))
print(head(data.df))
print(tail(data.df))
```

*Функция меняет название колонок. Первые три получают имена year, month, day, а остальные получают номера, начиная с нуля.*
*Последние 24 колонки показывают количество осадков по часам.*

- Добавьте новую колонку с названием *daily*, в которую запишите сумму крайних правых 24 колонок. Постройте гистограмму по этой колонке. Какие выводы можно сделать?

```{r}
data.df[ , "daily"] = rowSums(data.df[4:27])
hist(data.df[ , "daily"])
```

*Данные хранят отрицательные значения осадков, чего быть не должно.*

- Создайте новый датафрейм ``fixed.df`` в котором исправьте замеченную ошибку. Постройте новую гистограмму, поясните почему она более корректна.

```{r}
fixed.df = data.df
fixed.df[ , "daily"][which(fixed.df$daily < 0)] = 0
hist(fixed.df[, "daily"])
```

*В исправленном варианте отрицательные значения были обнулены.*

## Синтаксис и типизирование
* Для каждой строки кода поясните полученный результат, либо объясните почему она ошибочна.

```{r}
v <- c("4", "8", "15", "16", "23", "42")
max(v)
sort(v)
sum(v)
```
*В вектор записываются строковые значения, поэтому функции работают не так, как мы ожидаем. Сортировка и поиск максимального значения производятся по первому символу, поэтому "8" является наибольшим. Сумму строк произвести нельзя.*

* Для следующих наборов команд поясните полученный результат, либо объясните почему они ошибочна.

```{r}
v2 <- c("5",7,12)
v2[2] + v2[3]
```

*Из-за того что типы в векторе разные, все элементы получают тип char, а значит их суммирование невозможно.*

```{r}
df3 <- data.frame(z1="5",z2=7,z3=12)
df3[1,2] + df3[1,3]
```
*В data frame можно использовать разные типы, поэтому все работает.*

```{r}
l4 <- list(z1="6", z2=42, z3="49", z4=126)
l4[[2]] + l4[[4]]
l4[2] + l4[4]
```
*Последняя строчка не выполняется, потому что идет адресация к 2-ому и 4-ому элементам, которых формально нет (т.к. создан именованный список).*


## Работа с функциями и операторами
* Оператор двоеточие создаёт последовательность целых чисел по порядку. Этот оператор — частный случай функции ``seq()``, которую вы использовали раньше. Изучите эту функцию, вызвав команду ``?seq``. Используя полученные знания выведите на экран:
+ Числа от 1 до 10000 с инкрементом 372. 

```{r}
seq(1, 10000, 372)
```

+ Числа от 1 до 10000 длиной 50.
```{r}
seq(1, 10000, length.out = 50)
```

* Функция ``rep()`` повторяет переданный вектор указанное число раз. Объясните разницу между ``rep(1:5,times=3)`` и ``rep(1:5, each=3)``.

```{r}
print(rep(1:5, times=3))
print(rep(1:5, each=3))
```
*Параметр times определяет количество повторений самой последовательности, а параметр each определеяет количество повторений каждого числа подряд.*